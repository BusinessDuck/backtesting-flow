.page {
  min-height: 100vh;
  padding: 32px;
  display: grid;
  grid-template-columns: 280px minmax(0, 1fr);
  gap: 28px;
  position: relative;
}

.panel {
  background: #ffffff;
  border-radius: 18px;
  padding: 18px 16px 10px;
  border: 1px solid rgba(120, 126, 140, 0.15);
  box-shadow: 0 18px 40px rgba(27, 33, 45, 0.08);
}

.panel__title {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: #66656d;
  margin-bottom: 18px;
}

.section {
  padding: 10px 0 12px;
  border-bottom: 1px solid rgba(166, 171, 184, 0.18);
}

.section:last-child {
  border-bottom: 0;
  padding-bottom: 6px;
}

.section__title {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.22em;
  color: #75727a;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.info-icon {
  font-size: 10px;
  color: #9a9aa0;
  cursor: help;
  font-weight: normal;
  text-transform: none;
  letter-spacing: normal;
  margin-left: 2px;
}

.field {
  display: grid;
  gap: 6px;
  padding: 4px 0;
}

.field__label {
  font-size: 14px;
  color: #1f2027;
}

.field__control {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
  align-items: center;
  gap: 10px;
}

.input {
  width: 92px;
  padding: 7px 10px;
  border-radius: 8px;
  border: 1px solid rgba(140, 146, 160, 0.4);
  background: #fbfbfc;
  font-size: 14px;
}

.select {
  height: 32px;
  padding: 0 10px;
  border-radius: 8px;
  border: 1px solid rgba(140, 146, 160, 0.4);
  background: #fbfbfc;
  font-size: 13px;
}

.unit {
  font-size: 13px;
  color: #2a2b33;
}

.info {
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background: #b6b3b8;
  color: #ffffff;
  font-size: 11px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.check {
  display: grid;
  grid-template-columns: 16px auto 1fr;
  align-items: center;
  gap: 10px;
  padding: 4px 0;
  font-size: 14px;
  color: #1f2027;
}

.check__input {
  position: absolute;
  opacity: 0;
}

.check__box {
  width: 16px;
  height: 16px;
  border-radius: 4px;
  border: 1px solid #2b2a2f;
  display: inline-block;
}

.check__input:checked + .check__box {
  background: #2b2a2f;
  box-shadow: inset 0 0 0 3px #ffffff;
}

.check__label {
  grid-column: 2 / span 2;
  display: flex;
  align-items: center;
  gap: 4px;
}

.stage {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 18px;
  position: relative;
  min-height: 560px;
}

.diagram {
  background: #ffffff;
  border-radius: 18px;
  border: 1px solid rgba(165, 171, 185, 0.3);
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  flex: 1;
  --cell-height: 40px;
  --ltf-height: 76px;
}

.diagram__title {
  font-size: 12px;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: #61606b;
}

.diagram__note {
  font-size: 14px;
  color: #585a66;
  padding: 12px;
  border-radius: 12px;
  background: rgba(226, 228, 235, 0.4);
  text-align: center;
}

.timeline-grid {
  display: grid;
  grid-template-columns: 1.1fr 3.4fr 3.4fr 1.1fr;
  gap: 12px;
  align-items: stretch;
}

.bar {
  background: #d9d9d9;
  border-radius: 12px;
  padding: 12px;
  border: 3px solid #9d9d9d;
  display: grid;
  gap: 12px;
}

.bar--mini {
  text-align: left;
  grid-template-rows: auto;
  padding: 12px;
}

.bar__title {
  font-weight: 600;
  color: #2a2a2f;
}

.bar--mini {
  padding: 14px 12px;
}

.bar__dot {
  font-size: 20px;
  color: #6b6b70;
  display: grid;
  place-items: center;
}

.bar__cells {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

.bar__cells--mini {
  grid-template-columns: 1fr;
}

.bar__subtitle {
  font-size: 13px;
  color: #3f3f45;
  font-weight: 600;
  margin-bottom: 6px;
}

.bar-mini {
  display: grid;
  gap: 12px;
  align-content: start;
  align-items: start;
}

.bar-mini__label {
  font-size: 13px;
  color: #3f3f45;
  font-weight: 600;
  margin-bottom: 6px;
  text-align: left;
}

.bar-mini__dot {
  display: grid;
  place-items: center;
  min-height: var(--cell-height);
  background: #ffffff;
  border-radius: 8px;
  border: 2px solid #7a7a7a;
  font-size: 16px;
  color: #5b5b61;
  justify-items: center;
  width: 100%;
}

.bar-mini__dot--dim {
  background: #bdbdbd;
  border-color: #7a7a7a;
  min-height: var(--ltf-height);
}

.diagram--ltf .bar__cells {
  margin-bottom: 10px;
}

.cell {
  background: #ffffff;
  border-radius: 6px;
  border: 2px solid #7b7b7b;
  min-height: var(--cell-height);
  display: grid;
  place-items: center;
  font-weight: 600;
  color: #2a2a2f;
}

.cell--highlight {
  border-color: #ff3b1f;
  box-shadow: inset 0 0 0 1px rgba(255, 59, 31, 0.6);
}

.cell--open {
  border-color: #3aa655;
  box-shadow: inset 0 0 0 1px rgba(58, 166, 85, 0.5);
  color: #2f7c42;
}


.ltf__bars {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

.ltf__bars--mini {
  grid-template-columns: 1fr;
}

.ltf-bar {
  background: #c9c9c9;
  border-radius: 8px;
  padding: 8px;
  border: 2px solid #7a7a7a;
  display: grid;
  gap: 6px;
  min-height: var(--ltf-height);
}

.ltf-bar__title {
  font-size: 11px;
  color: #3b3b40;
  font-weight: 600;
}

.ltf-cells {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
}

.ltf-cell {
  background: #ffffff;
  border-radius: 4px;
  border: 1.5px solid #6f6f6f;
  font-size: 10px;
  font-weight: 600;
  color: #2a2a2f;
  display: grid;
  place-items: center;
  line-height: 1;
  min-height: 22px;
}

.ltf-cell--close {
  border-color: #ff3b1f;
  box-shadow: inset 0 0 0 1px rgba(255, 59, 31, 0.6);
}

.ltf-cell--open {
  border-color: #3aa655;
  box-shadow: inset 0 0 0 1px rgba(58, 166, 85, 0.5);
  color: #2f7c42;
}

.ltf-bar--dots {
  background: #bdbdbd;
  align-items: center;
  max-width: 60px;
  min-width: 50px;
  width: auto;
  justify-self: start;
  padding: 8px 12px;
}

.ltf-bar__dot {
  font-size: 16px;
  color: #6a6a6f;
  text-align: center;
}

.exec-grid--ltf .exec-row--ltf {
  grid-template-columns: repeat(4, 1fr);
  padding: 0 15px;
  gap: 10px;
}

.exec-grid--ltf .exec-row--ltf .tag {
  grid-column: auto;
  width: 100%;
}

.exec-label {
  font-size: 12px;
  color: #6a6a71;
  align-self: center;
}

.exec-grid {
  display: grid;
  grid-template-columns: 1.1fr 3.4fr 3.4fr 1.1fr;
  gap: 12px;
  align-items: center;
}

.exec-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  padding: 0 15px;
  min-height: 36px;
}

.exec-row .tag {
  grid-column: 4 / span 1;
  justify-self: center;
  max-width: 100%;
}

.exec-spacer {
  min-height: 36px;
}


.flow-grid {
  display: grid;
  grid-template-columns: 1.1fr 3.4fr 3.4fr 1.1fr;
  gap: 12px;
  align-items: start;
  padding-top: 6px;
}

.flow-slot {
  min-height: 48px;
}

.flow-cells {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  padding: 0 15px;
}

.flow-entry {
  grid-column: 4 / span 1;
  justify-self: center;
  width: 100%;
}

.flow-exit {
  grid-column: 3 / span 1;
}

.tag {
  padding: 8px 10px;
  background: #ffffff;
  border: 2px solid currentColor;
  border-radius: 8px;
  font-size: 12px;
  text-align: center;
  color: #2a2a2f;
  text-transform: none;
  letter-spacing: 0.02em;
  width: 100%;
  line-height: 1.2;
}

.tag--exec {
  color: #ff3b1f;
  padding-top: 8px;
  padding-bottom: 6px;
}

.tag--entry {
  color: #3d8eea;
}

.tag--fill {
  color: #3aa655;
}

.flow-fill {
  grid-column: 1 / span 1;
  width: 100%;
}

.flow-fill--closing {
  grid-column: 4 / span 1;
  grid-row: 2;
}

.flow-position-row {
  display: grid;
  grid-template-columns: 1.1fr 3.4fr 3.4fr 1.1fr;
  gap: 12px;
  align-items: center;
  margin-top: 6px;
}

.flow-position {
  grid-column: 3 / span 2;
  margin-left: 15px;
  width: calc(100% - 15px);
  background: #63d26f;
  border-radius: 10px;
  min-height: 34px;
  display: grid;
  place-items: center;
  font-weight: 600;
  color: #113f1d;
}

.flow-position-row--closing {
  margin-top: 8px;
}

.flow-position--closing {
  grid-column: 1 / span 2;
  margin-left: 0;
  width: 100%;
}

.flow-position-row--closing-ohlc {
  grid-template-columns: 1.1fr 3.4fr 0.85fr 2.55fr 1.1fr;
}

.flow-position--closing-ohlc {
  grid-column: 1 / span 3;
  width: 100%;
}


@media (max-width: 980px) {
  .page {
    grid-template-columns: 1fr;
  }

  .stage {
    min-height: 360px;
  }

  .timeline-grid {
    grid-template-columns: 1fr;
  }

  .exec-grid {
    grid-template-columns: 1fr;
  }

  .flow-grid {
    grid-template-columns: 1fr;
  }

  .flow-position-row {
    grid-template-columns: 1fr;
  }
}
.cell--dot {
  color: #6b6b70;
  font-weight: 500;
}

/* Events Grid */
.events-grid {
  margin-top: 16px;
}

.events-grid-label {
  font-size: 11px;
  color: #6a6a71;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.events-grid-cell {
  position: relative;
}

.events-grid-cell--empty {
  min-height: 32px;
}

/* Компактные статусы событий */
.event-badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  white-space: nowrap;
  border: 1.5px solid currentColor;
  background: rgba(255, 255, 255, 0.9);
}

.event-badge--execution {
  color: #ff3b1f;
}

.event-badge--funCall {
  color: #3d8eea;
}

.event-badge--fillAttempt {
  color: #f59e0b;
}

.event-badge--fill {
  color: #3aa655;
}

.event-badge--position {
  color: #63d26f;
  background: #63d26f;
  color: #113f1d;
  border-color: #3aa655;
}
